<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced Chess AI with Tutelage</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="tutor-button.css">
</head>

<body>
    <div class="container">
        <header>
            <h1>Enhanced Chess AI with Tutelage</h1>
            <div id="turn-indicator">Your turn (white)</div>
        </header>

        <div class="main-content">
            <div class="game-container">
                <div id="board"></div>

                <!-- Tutelage Panel added below move history -->
                <div id="tutelage-panel" class="tutelage-panel">
                    <h4>Chess Tutelage System</h4>
                    <div class="pattern-recognition">
                        <h5>Recognized Patterns</h5>
                        <div id="recognized-patterns">No patterns detected yet</div>
                    </div>
                    <div class="tactical-motifs">
                        <h5>Tactical Motifs</h5>
                        <div id="detected-motifs">No tactics detected yet</div>
                    </div>
                    <div class="counter-moves">
                        <h5>Counter Moves</h5>
                        <div id="counter-moves-container">
                            <p id="no-counter-moves-message">No counter moves available yet</p>
                            <div id="counter-moves-list" class="counter-moves-list"></div>
                        </div>
                        <div class="counter-move-form">
                            <h6>Add Counter Move</h6>
                            <div class="form-row">
                                <label for="opponent-move">Opponent Move:</label>
                                <input type="text" id="opponent-move" placeholder="e.g., e2e4" />
                            </div>
                            <div class="form-row">
                                <label for="counter-move">Counter Move:</label>
                                <input type="text" id="counter-move" placeholder="e.g., e7e5" />
                            </div>
                            <div class="form-row">
                                <label for="counter-move-note">Note:</label>
                                <input type="text" id="counter-move-note" placeholder="Optional note" />
                            </div>
                            <button id="add-counter-move" class="btn secondary">Add Counter Move</button>
                        </div>
                    </div>

                </div>
            </div>

            <div id="chess-advice-box" class="chess-advice-box hidden">
                <div class="advice-header">
                    <div class="advice-title">Chess Tutor</div>
                    <div class="advice-controls">
                        <button class="close-btn" title="Close">×</button>
                    </div>
                </div>
                <div class="advice-content">
                    <div id="advice-message">What would you like help with?</div>
                    <div id="advice-options" class="advice-options">
                        <!-- Options will be generated here -->
                    </div>
                </div>
                <div class="advice-footer">
                    <button id="new-advice-btn">New Options</button>
                </div>
            </div>

            <!-- Chess Tutor Button -->
            <button id="chess-tutor-btn" class="chess-tutor-btn">
                <i class="fas fa-chess-knight"></i>
                <span>Chess Tutor</span>
            </button>


            <div class="controls-container">
                <div class="control-panel">
                    <h3>Game Controls</h3>
                    <button id="new-game" class="btn primary">New Game</button>

                    <div class="control-group">
                        <!-- AI Opponent Profile Panel -->
                        <div class="ai-profile-panel">
                            <button class="expand-profile" title="View full profile">
                                <i class="fas fa-expand-alt"></i>
                            </button>
                            <div class="profile-header">
                                <div class="profile-title">
                                    <h3 id="ai-name">Chess Master</h3>
                                    <div class="personality-badge">
                                        <i id="personality-icon" class="fas fa-chess"></i>
                                        <span id="personality-name">Balanced</span>
                                    </div>
                                </div>
                            </div>

                            <div class="profile-content">
                                <div class="profile-section">
                                    <h4>Playing Style</h4>
                                    <div id="ai-personality" class="personality-description">
                                        Loading AI personality...
                                    </div>
                                    <div class="personality-quote">
                                        "Every move should have a purpose."
                                    </div>
                                </div>

                                <div class="profile-section">
                                    <h4>Strengths & Weaknesses</h4>
                                    <div class="strengths-weaknesses">
                                        <div class="strengths">
                                            <h5>Strengths</h5>
                                            <ul id="ai-strengths">
                                                <li>Loading strengths...</li>
                                            </ul>
                                        </div>
                                        <div class="weaknesses">
                                            <h5>Weaknesses</h5>
                                            <ul id="ai-weaknesses">
                                                <li>Loading weaknesses...</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>

                                <div class="profile-section">
                                    <h4>Skill Level</h4>
                                    <div class="skill-bars">
                                        <div class="skill-bar">
                                            <span class="skill-name">Opening</span>
                                            <div class="bar-container">
                                                <div id="opening-skill" class="bar" style="width: 70%"></div>
                                            </div>
                                        </div>
                                        <div class="skill-bar">
                                            <span class="skill-name">Middlegame</span>
                                            <div class="bar-container">
                                                <div id="middlegame-skill" class="bar" style="width: 65%"></div>
                                            </div>
                                        </div>
                                        <div class="skill-bar">
                                            <span class="skill-name">Endgame</span>
                                            <div class="bar-container">
                                                <div id="endgame-skill" class="bar" style="width: 75%"></div>
                                            </div>
                                        </div>
                                        <div class="skill-bar">
                                            <span class="skill-name">Tactics</span>
                                            <div class="bar-container">
                                                <div id="tactics-skill" class="bar" style="width: 80%"></div>
                                            </div>
                                        </div>
                                        <div class="skill-bar">
                                            <span class="skill-name">Strategy</span>
                                            <div class="bar-container">
                                                <div id="strategy-skill" class="bar" style="width: 60%"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="profile-section">
                                    <h4>Favorite Openings</h4>
                                    <div id="favorite-openings" class="opening-list">
                                        Loading favorite openings...
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <span class="control-group"></span>
                    <h4>AI Difficulty:</h4>
                    <select id="difficulty">
                        <option value="1">1: Beginner</option>
                        <option value="2">2: Novice</option>
                        <option value="3" selected>3: Amateur</option>
                        <option value="4">4: Intermediate</option>
                        <option value="5">5: Advanced</option>
                        <option value="6">6: Expert</option>
                        <option value="7">7: Grandmaster</option>
                        <option value="8">8: World GM</option>
                    </select>

                    <input type="checkbox" id="show-visualizations" checked>
                    <label for="show-visualizations">Show AI Thinking</label>


                    <!-- <div class="control-group"> -->
                    <input type="checkbox" id="center-line-strategy" checked>
                    <label for="center-line-strategy">Center Line Strategy</label>



                    </span>
                    <div id="skill-description">Level 3: Amateur (70% accuracy)</div>
                </div>

                <div class="analysis-panel">
                    <h3>Position Analysis</h3>
                    <div class="control-group">
                        <label for="depth-array">Analysis Depths:</label>
                        <input type="text" id="depth-array" placeholder="e.g., 1,3,5" value="1,2,3">
                    </div>
                    <div class="opening-info">
                        <h4>Current Opening</h4>
                        <div id="openingName">Standard Position</div>
                    </div>

                    <button id="analyze-position" class="btn secondary">Analyze Position</button>

                    <div class="analysis-stats">
                        <div>Positions evaluated: <span id="positions-evaluated">0</span></div>
                        <div>Search depth: <span id="search-depth">0</span></div>
                        <div>Pruned branches: <span id="pruned-branches">0</span></div>
                    </div>

                    <div class="thinking-status">AI is idle</div>
                </div>

                <div class="visualization-panel">
                    <h3>Move Evaluations</h3>
                    <div id="move-evaluations"></div>

                    <h3>Column Strength</h3>
                    <div id="column-strength-bars"></div>

                    <div class="advanced-analysis">
                        <button id="analyze-sequences" class="btn secondary">Analyze Sequences</button>
                        <button id="stop-sequence-analysis" class="btn danger">Stop Analysis</button>
                        <select id="sequence-depth">
                            <option value="3">Depth 3</option>
                            <option value="4" selected>Depth 4</option>
                            <option value="5">Depth 5</option>
                        </select>
                    </div>

                    <div class="chart-controls">
                        <button id="generate-piece-chart" class="btn secondary">Generate Piece Chart</button>
                    </div>
                    <button id="reset-game-state" class="control-button">Reset Game State</button>
                </div>
                <div class="matchmaking-panel">
                    <h3>Play Against Others</h3>
                    <div class="matchmaking-status" id="queue-status">Not in queue</div>
                    <div class="player-count">Players waiting: <span id="waiting-count">0</span></div>
                    <div class="matchmaking-controls">
                        <button id="join-queue" class="btn primary">Join Waiting Queue</button>
                        <button id="leave-queue" class="btn danger" style="display: none;">Leave Queue</button>
                    </div>
                    <div class="queue-position">
                        Your position: <span id="queue-position">-</span>
                    </div>
                    <div class="match-info" id="match-info" style="display: none;">
                        <div class="match-status">Playing against: <span id="opponent-name">-</span></div>
                        <div class="match-color">You are playing as: <span id="player-color">-</span></div>
                    </div>
                </div>

            </div>
            <div id="tutelage-panel" class="tutelage-panel">

            </div>

        </div>

        <!-- Modal for full AI profile -->
        <div id="profile-modal" class="profile-modal">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title">
                        <h2 id="modal-name">Chess Master</h2>
                        <div class="personality-badge">
                            <i id="modal-personality-icon" class="fas fa-chess"></i>
                            <span id="modal-personality-name">Balanced</span>
                        </div>
                    </div>
                    <button class="modal-close">×</button>
                </div>
                <div class="modal-body">
                    <div class="modal-section">
                        <h3>Playing Style</h3>
                        <div id="modal-personality-description"></div>
                        <div id="modal-personality-quote" class="personality-quote"></div>
                    </div>

                    <div class="modal-section">
                        <h3>Strengths & Weaknesses</h3>
                        <div class="strengths-weaknesses">
                            <div class="strengths">
                                <h5>Strengths</h5>
                                <ul id="modal-strengths"></ul>
                            </div>
                            <div class="weaknesses">
                                <h5>Weaknesses</h5>
                                <ul id="modal-weaknesses"></ul>
                            </div>
                        </div>
                    </div>

                    <div class="modal-section">
                        <h3>Skill Level</h3>
                        <div class="skill-bars">
                            <div class="skill-bar">
                                <span class="skill-name">Opening</span>
                                <div class="bar-container">
                                    <div id="modal-opening-skill" class="bar"></div>
                                </div>
                            </div>
                            <div class="skill-bar">
                                <span class="skill-name">Middlegame</span>
                                <div class="bar-container">
                                    <div id="modal-middlegame-skill" class="bar"></div>
                                </div>
                            </div>
                            <div class="skill-bar">
                                <span class="skill-name">Endgame</span>
                                <div class="bar-container">
                                    <div id="modal-endgame-skill" class="bar"></div>
                                </div>
                            </div>
                            <div class="skill-bar">
                                <span class="skill-name">Tactics</span>
                                <div class="bar-container">
                                    <div id="modal-tactics-skill" class="bar"></div>
                                </div>
                            </div>
                            <div class="skill-bar">
                                <span class="skill-name">Strategy</span>
                                <div class="bar-container">
                                    <div id="modal-strategy-skill" class="bar"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="modal-section">
                        <h3>Favorite Openings</h3>
                        <div id="modal-favorite-openings" class="opening-list"></div>
                    </div>

                    <div class="modal-section">
                        <h3>Playing History</h3>
                        <div id="modal-playing-history">
                            <p>Games played: <span id="modal-games-played">0</span></p>
                            <p>Win rate: <span id="modal-win-rate">0%</span></p>
                            <p>Average game length: <span id="modal-avg-game-length">0 moves</span></p>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="modal-close-btn">Close</button>
                </div>
            </div>
        </div>
        <!-- Buckets Modal -->
        <div id="buckets-modal" class="modal">
            <div class="modal-content">
                <span class="close">×</span>
                <h2>Learning Buckets</h2>

                <div class="buckets-info">
                    <p>Learning buckets organize positions based on how well you know them.</p>
                </div>

                <div class="buckets-container">
                    <!-- Buckets will be displayed here -->
                </div>

                <div class="buckets-stats">
                    <h3>Learning Statistics</h3>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <div class="stat-label">Total Positions</div>
                            <div class="stat-value" id="total-bucket-positions">0</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-label">Mastered Positions</div>
                            <div class="stat-value" id="mastered-positions">0</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-label">Learning Progress</div>
                            <div class="stat-value" id="learning-progress">0%</div>
                        </div>
                    </div>
                </div>

                <div class="buckets-chart-container">
                    <canvas id="buckets-distribution-chart"></canvas>
                </div>
            </div>

            <!-- Make sure your matchmaking panel has this structure -->
            <div class="matchmaking-panel">
                <h3>Play Against Others</h3>
                <div class="matchmaking-status" id="queue-status">Not in queue</div>
                <div class="player-count">Players waiting: <span id="waiting-count">0</span></div>
                <div class="matchmaking-controls">
                    <button id="join-queue" class="btn primary">Join Waiting Queue</button>
                    <button id="leave-queue" class="btn danger" style="display: none;">Leave Queue</button>
                </div>
                <div class="queue-position">
                    Your position: <span id="queue-position">-</span>
                </div>
                <div class="match-info" id="match-info" style="display: none;">
                    <div class="match-status">Playing against: <span id="opponent-name">-</span></div>
                    <div class="match-color">You are playing as: <span id="player-color">-</span></div>
                </div>
            </div>


        </div>

        <script src="enhanced-chess-2a.js" type="module"></script>
</body>

</html>